<!DOCTYPE html>
<html lang="it" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
  <meta name="theme-color" content="#667eea">
  <title>AutoTrack - Gestione Intelligente Veicoli</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
  
  <!-- HEADER -->
  <header class="header">
    <div class="container header-content">
      <div class="logo-section">
        <div class="logo-icon">
          <i class="fas fa-car-side"></i>
        </div>
        <div class="logo-text">
          <h1>AutoTrack</h1>
          <p class="logo-subtitle">Gestione intelligente dei tuoi veicoli</p>
        </div>
      </div>
      <div class="header-actions">
        <button id="themeToggle" class="theme-toggle" aria-label="Cambia tema">
          <i class="fas fa-moon"></i>
        </button>
      </div>
    </div>
  </header>

  <!-- HERO SECTION -->
  <section class="hero">
    <div class="container">
      <div class="hero-content">
        <h2 class="hero-title">Gestisci i tuoi veicoli in modo semplice</h2>
        <p class="hero-subtitle">Monitora manutenzioni, scadenze e chilometraggio con AutoTrack</p>
      </div>
    </div>
  </section>

  <!-- MAIN CONTENT -->
  <main class="container main-content">
    
    <!-- STATS SECTION -->
    <section class="stats-section">
      <div class="stat-card stat-card-primary">
        <div class="stat-icon">
          <i class="fas fa-car"></i>
        </div>
        <div class="stat-content">
          <h3 id="totalVehicles">0</h3>
          <p id="totalVehiclesLabel">Veicoli Totali</p>
        </div>
      </div>

      <div class="stat-card stat-card-success">
        <div class="stat-icon">
          <i class="fas fa-tools"></i>
        </div>
        <div class="stat-content">
          <h3 id="totalMaintenances">0</h3>
          <p id="totalMaintenancesLabel">Manutenzioni</p>
        </div>
      </div>

      <div class="stat-card stat-card-warning">
        <div id="alertsIcon" class="stat-icon">
          <i class="fas fa-exclamation-triangle"></i>
        </div>
        <div class="stat-content">
          <h3 id="activeAlerts">0</h3>
          <p id="activeAlertsLabel">Scadenze Attive</p>
        </div>
      </div>

      <div class="stat-card stat-card-info">
        <div class="stat-icon">
          <i class="fas fa-calendar-check"></i>
        </div>
        <div class="stat-content">
          <h3 id="completedMaintenances">0</h3>
          <p>Completate</p>
        </div>
      </div>
    </section>

    <!-- ALERTS SECTION -->
    <section id="alertsSection" class="alerts-section" style="display: none;">
      <div class="section-header">
        <div class="section-title">
          <i class="fas fa-bell"></i>
          <h2>Notifiche e Scadenze</h2>
        </div>
      </div>
      <div id="alertsContainer" class="alerts-container"></div>
    </section>

    <!-- VEHICLES SECTION -->
    <section class="vehicles-section">
      <div class="section-header">
        <div class="section-title">
          <i class="fas fa-garage"></i>
          <h2>I Miei Veicoli</h2>
        </div>
        <button id="btnAddVehicle" class="btn btn-primary btn-floating">
          <i class="fas fa-plus"></i>
          <span>Aggiungi Veicolo</span>
        </button>
      </div>
      
      <div id="vehiclesContainer" class="vehicles-grid"></div>

      <div id="emptyState" class="empty-state" style="display: none;">
        <i class="fas fa-car-crash"></i>
        <h3>Nessun veicolo registrato</h3>
        <p>Aggiungi il tuo primo veicolo per iniziare a tracciare le manutenzioni.</p>
        <button id="btnAddVehicleEmpty" class="btn btn-primary">
          <i class="fas fa-plus"></i> Aggiungi Veicolo
        </button>
      </div>
    </section>
  </main>

  <!-- MODAL: ADD VEHICLE -->
  <div id="dialogAddVehicle" class="modal">
    <div class="modal-overlay" onclick="document.getElementById('btnCancelAddVehicle').click()"></div>
    <div class="modal-content modal-medium">
      <div class="modal-header">
        <h3 id="dialogAddVehicleTitle">Aggiungi Nuovo Veicolo</h3>
        <button class="modal-close" id="btnCancelAddVehicle" aria-label="Chiudi dialog">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <form id="formAddVehicle">
          <div class="form-group">
            <label for="brand"><i class="fas fa-trademark"></i> Marca</label>
            <input type="text" id="brand" required placeholder="Es. Fiat" autocomplete="off">
          </div>
          <div class="form-group">
            <label for="model"><i class="fas fa-car"></i> Modello</label>
            <input type="text" id="model" required placeholder="Es. Panda" autocomplete="off">
          </div>
          <div class="form-group-row">
            <div class="form-group">
              <label for="plate"><i class="fas fa-barcode"></i> Targa</label>
              <input type="text" id="plate" required placeholder="Es. AA000BB" autocomplete="off">
            </div>
            <div class="form-group">
              <label for="year"><i class="fas fa-calendar-alt"></i> Anno</label>
              <input type="number" id="year" min="1900" max="2100" placeholder="2020">
            </div>
          </div>
          <div class="form-group">
            <label for="currentKm"><i class="fas fa-tachometer-alt"></i> Chilometraggio Attuale</label>
            <input type="number" id="currentKm" min="0" placeholder="50000">
          </div>
          <div class="modal-actions">
            <button type="button" class="btn btn-secondary" id="btnCancelVehicle">Annulla</button>
            <button type="submit" class="btn btn-primary">
              <i class="fas fa-save"></i> Salva Veicolo
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- MODAL: VEHICLE DETAILS -->
  <div id="dialogVehicleDetails" class="modal">
    <div class="modal-overlay" onclick="document.getElementById('btnCloseDetails').click()"></div>
    <div class="modal-content modal-large">
      <div class="modal-header">
        <div>
          <h3 id="detailsVehicleName">Nome Veicolo</h3>
          <p id="detailsVehicleInfo" class="text-muted">Targa - Anno</p>
        </div>
        <button class="modal-close" id="btnCloseDetails" aria-label="Chiudi dialog">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <div class="details-grid">
          <div class="details-column details-info">
            <h4>Dettagli & Aggiorna Km</h4>
            <form id="formUpdateKm" class="km-input-group">
              <label for="updateKm" class="sr-only">Aggiorna Chilometraggio</label>
              <i class="fas fa-tachometer-alt"></i>
              <input type="number" id="updateKm" min="0" required placeholder="Nuovo chilometraggio">
              <button type="submit" class="btn btn-primary btn-sm" title="Salva Chilometraggio">
                <i class="fas fa-arrow-up"></i>
              </button>
            </form>
            
            <div class="vehicle-details-actions">
              <button id="btnEditVehicleFromDetails" class="btn btn-secondary btn-full">
                <i class="fas fa-pencil-alt"></i> Modifica Dati
              </button>
              <button id="btnDeleteVehicleFromDetails" class="btn btn-danger btn-full">
                <i class="fas fa-trash"></i> Elimina Veicolo
              </button>
            </div>
          </div>

          <div class="details-column details-maintenances">
            <div class="section-header">
              <h4>Storico Manutenzioni</h4>
              <button id="btnAddMaintenanceFromDetails" class="btn btn-primary btn-sm">
                <i class="fas fa-plus"></i> Nuova
              </button>
            </div>
            <div id="maintenancesList" class="maintenances-list"></div>
            <div id="noMaintenanceState" class="empty-state-small" style="display: none;">
              <p>Nessuna manutenzione registrata.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- MODAL: ADD MAINTENANCE -->
  <div id="dialogAddMaintenance" class="modal">
    <div class="modal-overlay" onclick="document.getElementById('btnCancelAddMaintenance').click()"></div>
    <div class="modal-content modal-medium">
      <div class="modal-header">
        <div>
          <h3 id="dialogAddMaintenanceTitle">Aggiungi Nuova Manutenzione</h3>
          <p id="maintenanceVehicleInfo" class="text-muted"></p>
        </div>
        <button class="modal-close" id="btnCancelAddMaintenance" aria-label="Chiudi dialog">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <form id="formAddMaintenance">
          <div class="form-group">
            <label for="type"><i class="fas fa-tag"></i> Tipo di Manutenzione</label>
            <select id="type" required></select>
          </div>
          <div class="form-group-row">
            <div class="form-group">
              <label for="dueDate"><i class="fas fa-calendar-alt"></i> Scadenza (Data)</label>
              <input type="date" id="dueDate">
            </div>
            <div class="form-group">
              <label for="dueKm"><i class="fas fa-tachometer-alt"></i> Scadenza (Km)</label>
              <input type="number" id="dueKm" min="0" placeholder="Es. 80000">
            </div>
          </div>
          <div class="form-group-row">
            <div class="form-group">
              <label for="notifyDaysBefore"><i class="fas fa-bell"></i> Notifica (gg prima)</label>
              <input type="number" id="notifyDaysBefore" min="0" value="7">
            </div>
            <div class="form-group form-group-checkbox" style="align-self: flex-end;">
              <label class="switch">
                <input type="checkbox" id="addCompleted">
                <span class="slider"></span>
              </label>
              <label for="addCompleted">Completata Subito</label>
            </div>
          </div>
          
          <div class="form-group">
            <label for="notes"><i class="fas fa-sticky-note"></i> Note Opzionali</label>
            <textarea id="notes" rows="3" placeholder="Aggiungi note opzionali..."></textarea>
          </div>
          
          <div class="modal-actions">
            <button type="button" class="btn btn-secondary" id="btnCancelMaintenance">Annulla</button>
            <button type="submit" class="btn btn-primary">
              <i class="fas fa-save"></i> Salva Manutenzione
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- MODAL: EDIT MAINTENANCE -->
  <div id="dialogEditMaintenance" class="modal">
    <div class="modal-overlay" onclick="document.getElementById('btnCancelEditMaintenance').click()"></div>
    <div class="modal-content modal-medium">
      <div class="modal-header">
        <div>
          <h3 id="dialogEditMaintenanceTitle">Modifica Manutenzione</h3>
          <p id="editMaintenanceVehicleInfo" class="text-muted"></p>
        </div>
        <button class="modal-close" id="btnCancelEditMaintenance" aria-label="Chiudi dialog">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <form id="formEditMaintenance">
          <div class="form-group">
            <label for="editType"><i class="fas fa-tag"></i> Tipo di Manutenzione</label>
            <select id="editType" required></select>
          </div>
          <div class="form-group-row">
            <div class="form-group">
              <label for="editDueDate"><i class="fas fa-calendar-alt"></i> Scadenza (Data)</label>
              <input type="date" id="editDueDate">
            </div>
            <div class="form-group">
              <label for="editDueKm"><i class="fas fa-tachometer-alt"></i> Scadenza (Km)</label>
              <input type="number" id="editDueKm" min="0" placeholder="Es. 80000">
            </div>
          </div>
          <div class="form-group">
              <label for="editNotifyDaysBefore"><i class="fas fa-bell"></i> Notifica (gg prima)</label>
              <input type="number" id="editNotifyDaysBefore" min="0" value="7">
          </div>
          
          <div class="form-group">
            <label for="editNotes"><i class="fas fa-sticky-note"></i> Note Opzionali</label>
            <textarea id="editNotes" rows="3" placeholder="Aggiungi note opzionali..."></textarea>
          </div>
          
          <div class="form-group-checkbox">
            <label class="switch">
              <input type="checkbox" id="editCompleted">
              <span class="slider"></span>
            </label>
            <label for="editCompleted">Manutenzione completata</label>
          </div>
          
          <div class="modal-actions">
            <button type="button" class="btn btn-secondary" id="btnCancelEditMaintenance">Annulla</button>
            <button type="submit" class="btn btn-primary">
              <i class="fas fa-save"></i> Salva Modifiche
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- MODAL: CONFIRM -->
  <div id="dialogConfirm" class="modal">
    <div class="modal-overlay" onclick="document.getElementById('btnCloseConfirm').click()"></div>
    <div class="modal-content modal-small">
      <div class="modal-header">
        <h3 id="confirmDialogTitle">Conferma Azione</h3>
        <button class="modal-close" id="btnCloseConfirm" aria-label="Chiudi dialog">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <p id="confirmDialogMessage"></p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" id="btnCancelConfirm">Annulla</button>
        <button class="btn btn-danger" id="btnConfirmAction">Conferma</button>
      </div>
    </div>
  </div>

  <!-- MODAL: ALERT -->
  <div id="dialogAlert" class="modal">
    <div class="modal-overlay" onclick="document.getElementById('btnCloseAlert').click()"></div>
    <div class="modal-content modal-small">
      <div class="modal-header">
        <h3 id="alertDialogTitle">Attenzione</h3>
        <button class="modal-close" id="btnCloseAlert" aria-label="Chiudi dialog">
          <i class="fas fa-times"></i>
        </button>
      </div>
      <div class="modal-body">
        <p id="alertDialogMessage"></p>
      </div>
      <div class="modal-footer">
        <button class="btn btn-primary" id="btnCloseAlertAction">OK</button>
      </div>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>
